<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.noerror.Mapper.inout_mapper">
<!-- 고유코드 중복확인 -->
<select id="code_dupl_inb" resultType="int" parameterType="String">
	SELECT COUNT(*) AS CNT FROM INBOUND WHERE INBOUND_CODE = #{inb_code}
</select>

<!-- 자재입고등록 -->
<insert id="insert_inbnd" parameterType="kr.co.noerror.DTO.inout_DTO">
    INSERT INTO INBOUND
    VALUES
    (INBOUND_NO.NEXTVAL, #{INBOUND_CODE}, #{PCH_CODE}, #{ITEM_CODE}, #{ITEM_DEL}, #{ITEM_QTY}, #{ITEM_EXP}, #{WH_CODE}, #{IN_STATUS}, #{INBOUND_DATE}, #{EMPLOYEE_CODE}, #{INB_MEMO}, SYSTIMESTAMP, NULL)
</insert>

<!-- 입고리스트 전체개수  -->
<select id="inbound_total" resultType="int" parameterType="Map">
<!-- 	SELECT COUNT(DISTINCT INBOUND_CODE) AS CNT FROM INBOUND -->
	SELECT COUNT (*) AS CNT FROM INBOUND
<!-- 		<if test="sclass != null"> -->
<!-- 			<where> -->
<!-- 			PRODUCT_CLASS2 = #{sclass}  -->
<!-- 			</where> -->
<!-- 		</if> -->
<!-- 		<if test="keyword != null">  -->
<!-- 			<where> -->
<!-- 			 (INBOUND_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 PCH_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 ITEM_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 ITEM_DEL LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 WH_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 EMPLOYEE_CODE LIKE '%'||#{keyword}||'%' -->
<!-- 			 )  -->
<!-- 			</where> -->
<!-- 		</if> -->
</select>

<!-- 입고 전체 리스트  -->
<select id="inbound_all_list" resultType="kr.co.noerror.DTO.inout_DTO" parameterType="Map">
	SELECT * FROM INBOUND
<!-- 	<if test="sclass != null"> -->
<!-- 		<where> -->
<!-- 		PRODUCT_CLASS2 = #{sclass}  -->
<!-- 		</where> -->
<!-- 	</if> -->
<!-- 	<if test="keyword != null">  -->
<!-- 		<where> -->
<!-- 		 (INBOUND_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 PCH_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 ITEM_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 ITEM_DEL LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 WH_CODE LIKE '%'||#{keyword}||'%' OR -->
<!-- 			 EMPLOYEE_CODE LIKE '%'||#{keyword}||'%' -->
<!-- 			 )  -->
<!-- 		</where> -->
<!-- 	</if> -->
	ORDER BY IIDX DESC
	OFFSET #{offset} ROWS FETCH NEXT #{post_ea} ROWS ONLY
</select>


<select id="inbound_detail" resultType="kr.co.noerror.DTO.inout_DTO" parameterType="String">
	SELECT * FROM INBOUND WHERE INBOUND_CODE = #{inbnd_code} ORDER BY IIDX 	
</select>

</mapper>